{"ast":null,"code":"import { ADD_RECIPE, DELETE_RECIPE, EDIT_RECIPE, LOGIN, LOGOUT, DELETE_ACCOUNT, LOAD_USER } from './actionType';\nimport axios from 'axios';\nimport setAuth from '../utils/setAuth.js';\n\nfunction auth() {\n  if (localStorage.token) {\n    setAuth(localStorage.token);\n  }\n}\n\nexport function userInfo() {\n  console.log('we are getting the user info rn');\n  return dispatch => {\n    try {\n      const res = axios.get('/login', {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      dispatch({\n        type: LOAD_USER,\n        payload: res.data\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n}\nexport const login = (email, password) => async dispatch => {\n  console.log('we are starting');\n\n  try {\n    const res = await axios.post('/login', {\n      \"email\": email,\n      \"password\": password\n    }, {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    dispatch({\n      type: LOGIN,\n      payload: res.data\n    });\n    auth(); //add authorization errors\n  } catch (error) {\n    console.log('error caught in action.js');\n  }\n};\nexport const logout = () => ({\n  type: LOGOUT\n});\nexport const deleteAccount = () => ({\n  type: DELETE_ACCOUNT\n});\nexport const addRecipe = recipe => ({\n  type: ADD_RECIPE,\n  recipe: recipe\n});\nexport const deleteRecipe = index => ({\n  type: DELETE_RECIPE,\n  index: index\n});\nexport const editRecipe = (recipe, index) => ({\n  type: EDIT_RECIPE,\n  recipe: recipe,\n  index: index\n});","map":{"version":3,"sources":["C:/Users/Kimberly Flores/Documents/GitHub/recipe-keeps/client/src/redux/actions.js"],"names":["ADD_RECIPE","DELETE_RECIPE","EDIT_RECIPE","LOGIN","LOGOUT","DELETE_ACCOUNT","LOAD_USER","axios","setAuth","auth","localStorage","token","userInfo","console","log","dispatch","res","get","headers","type","payload","data","err","login","email","password","post","error","logout","deleteAccount","addRecipe","recipe","deleteRecipe","index","editRecipe"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,aAArB,EAAoCC,WAApC,EAAiDC,KAAjD,EAAwDC,MAAxD,EAAgEC,cAAhE,EAAgFC,SAAhF,QAAgG,cAAhG;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,qBAApB;;AAEA,SAASC,IAAT,GAAe;AACX,MAAGC,YAAY,CAACC,KAAhB,EAAsB;AAClBH,IAAAA,OAAO,CAACE,YAAY,CAACC,KAAd,CAAP;AACH;AACJ;;AAGD,OAAO,SAASC,QAAT,GAAmB;AACtBC,EAAAA,OAAO,CAACC,GAAR,CAAY,iCAAZ;AACA,SAAQC,QAAD,IAAY;AACX,QAAG;AACC,YAAMC,GAAG,GAAIT,KAAK,CAACU,GAAN,CAAU,QAAV,EACb;AAACC,QAAAA,OAAO,EAAE;AACN,0BAAgB;AADV;AAAV,OADa,CAAb;AAIAH,MAAAA,QAAQ,CAAC;AACLI,QAAAA,IAAI,EAAEb,SADD;AAELc,QAAAA,OAAO,EAAEJ,GAAG,CAACK;AAFR,OAAD,CAAR;AAIC,KATL,CAUA,OAAMC,GAAN,EAAU;AACFT,MAAAA,OAAO,CAACC,GAAR,CAAYQ,GAAZ;AACH;AACJ,GAdT;AAeH;AAID,OAAO,MAAMC,KAAK,GAAG,CAACC,KAAD,EAAQC,QAAR,KAAqB,MAAMV,QAAN,IAAiB;AACvDF,EAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;;AAEA,MAAI;AACA,UAAME,GAAG,GAAG,MAAMT,KAAK,CAACmB,IAAN,CAAW,QAAX,EAClB;AAAC,eAASF,KAAV;AACC,kBAAYC;AADb,KADkB,EAGlB;AAACP,MAAAA,OAAO,EAAE;AAAC,wBAAgB;AAAjB;AAAV,KAHkB,CAAlB;AAKAH,IAAAA,QAAQ,CAAC;AACLI,MAAAA,IAAI,EAAEhB,KADD;AAELiB,MAAAA,OAAO,EAAEJ,GAAG,CAACK;AAFR,KAAD,CAAR;AAIAZ,IAAAA,IAAI,GAVJ,CAUO;AAEV,GAZD,CAaA,OAAOkB,KAAP,EAAc;AACVd,IAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACH;AACJ,CAnBM;AAsBP,OAAO,MAAMc,MAAM,GAAG,OAAO;AACzBT,EAAAA,IAAI,EAAEf;AADmB,CAAP,CAAf;AAOP,OAAO,MAAMyB,aAAa,GAAG,OAAO;AAChCV,EAAAA,IAAI,EAAEd;AAD0B,CAAP,CAAtB;AAMP,OAAO,MAAMyB,SAAS,GAAIC,MAAD,KAAa;AAClCZ,EAAAA,IAAI,EAAEnB,UAD4B;AAElC+B,EAAAA,MAAM,EAAEA;AAF0B,CAAb,CAAlB;AAKP,OAAO,MAAMC,YAAY,GAAIC,KAAD,KAAY;AACpCd,EAAAA,IAAI,EAAElB,aAD8B;AAEpCgC,EAAAA,KAAK,EAAEA;AAF6B,CAAZ,CAArB;AAKP,OAAO,MAAMC,UAAU,GAAG,CAACH,MAAD,EAASE,KAAT,MAAoB;AAC1Cd,EAAAA,IAAI,EAAEjB,WADoC;AAE1C6B,EAAAA,MAAM,EAACA,MAFmC;AAG1CE,EAAAA,KAAK,EAAEA;AAHmC,CAApB,CAAnB","sourcesContent":["import { ADD_RECIPE, DELETE_RECIPE, EDIT_RECIPE, LOGIN, LOGOUT, DELETE_ACCOUNT, LOAD_USER} from './actionType';\r\nimport axios from 'axios';\r\nimport setAuth from '../utils/setAuth.js';\r\n\r\nfunction auth(){\r\n    if(localStorage.token){\r\n        setAuth(localStorage.token);\r\n    }\r\n}\r\n\r\n\r\nexport function userInfo(){\r\n    console.log('we are getting the user info rn');\r\n    return (dispatch)=>{\r\n            try{\r\n                const res =  axios.get('/login', \r\n                {headers: {\r\n                    'Content-Type': 'application/json'}\r\n                });\r\n                dispatch({\r\n                    type: LOAD_USER,\r\n                    payload: res.data\r\n                    });\r\n                }\r\n            catch(err){\r\n                    console.log(err);\r\n                }\r\n            } \r\n}\r\n\r\n\r\n\r\nexport const login = (email, password) => async dispatch =>{\r\n    console.log('we are starting');\r\n\r\n    try {\r\n        const res = await axios.post('/login', \r\n        {\"email\": email,\r\n         \"password\": password},\r\n        {headers: {'Content-Type': 'application/json'}}   \r\n        );\r\n        dispatch({\r\n            type: LOGIN,\r\n            payload: res.data\r\n        });\r\n        auth();//add authorization errors\r\n\r\n    } \r\n    catch (error) {\r\n        console.log('error caught in action.js');\r\n    }\r\n}\r\n\r\n\r\nexport const logout = () => ({\r\n    type: LOGOUT\r\n})\r\n\r\n\r\n\r\n\r\nexport const deleteAccount = () => ({\r\n    type: DELETE_ACCOUNT\r\n})\r\n\r\n\r\n\r\nexport const addRecipe = (recipe) => ({\r\n    type: ADD_RECIPE,\r\n    recipe: recipe\r\n})\r\n\r\nexport const deleteRecipe = (index) => ({\r\n    type: DELETE_RECIPE,\r\n    index: index\r\n})\r\n\r\nexport const editRecipe = (recipe, index) => ({\r\n    type: EDIT_RECIPE,\r\n    recipe:recipe,\r\n    index: index\r\n})"]},"metadata":{},"sourceType":"module"}