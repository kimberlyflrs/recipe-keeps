{"ast":null,"code":"import { ADD_RECIPE, DELETE_RECIPE, EDIT_RECIPE, LOGIN, LOGOUT, DELETE_ACCOUNT, LOAD_USER } from './actionType';\nimport axios from 'axios';\nimport setAuth from '../utils/setAuth.js';\nexport const addRecipe = recipe => ({\n  type: ADD_RECIPE,\n  recipe: recipe\n});\nexport const deleteRecipe = index => ({\n  type: DELETE_RECIPE,\n  index: index\n});\nexport const editRecipe = (recipe, index) => ({\n  type: EDIT_RECIPE,\n  recipe: recipe,\n  index: index\n});\n\nfunction auth() {\n  if (localStorage.token) {\n    setAuth(localStorage.token);\n  }\n}\n\nfunction load_user(data) {\n  return {\n    type: LOAD_USER,\n    action: data\n  };\n}\n\nexport function userInfo() {\n  console.log('we are getting the user info rn');\n\n  try {\n    const res = axios.get('/login', {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    dispatch(load_user(res.data));\n  } catch (err) {\n    console.log(err);\n  }\n}\nexport function login(email, password) {\n  console.log('we are starting');\n  return async dispatch => {\n    try {\n      const res = await axios.post('/login', {\n        \"email\": email,\n        \"password\": password\n      }, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      dispatch({\n        type: LOGIN,\n        payload: res.data\n      }); //adds authorization headers\n\n      auth();\n      userInfo();\n      console.log('we finished waiting');\n    } catch (error) {\n      console.log('error caught in action.js');\n    }\n  };\n}\nexport const logout = () => ({\n  type: LOGOUT\n});\nexport const deleteAccount = () => ({\n  type: DELETE_ACCOUNT\n});","map":{"version":3,"sources":["C:/Users/Kimberly Flores/Documents/GitHub/recipe-keeps/client/src/redux/actions.js"],"names":["ADD_RECIPE","DELETE_RECIPE","EDIT_RECIPE","LOGIN","LOGOUT","DELETE_ACCOUNT","LOAD_USER","axios","setAuth","addRecipe","recipe","type","deleteRecipe","index","editRecipe","auth","localStorage","token","load_user","data","action","userInfo","console","log","res","get","headers","dispatch","err","login","email","password","post","payload","error","logout","deleteAccount"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,aAArB,EAAoCC,WAApC,EAAiDC,KAAjD,EAAwDC,MAAxD,EAAgEC,cAAhE,EAAgFC,SAAhF,QAAgG,cAAhG;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,qBAApB;AAEA,OAAO,MAAMC,SAAS,GAAIC,MAAD,KAAa;AAClCC,EAAAA,IAAI,EAAEX,UAD4B;AAElCU,EAAAA,MAAM,EAAEA;AAF0B,CAAb,CAAlB;AAKP,OAAO,MAAME,YAAY,GAAIC,KAAD,KAAY;AACpCF,EAAAA,IAAI,EAAEV,aAD8B;AAEpCY,EAAAA,KAAK,EAAEA;AAF6B,CAAZ,CAArB;AAKP,OAAO,MAAMC,UAAU,GAAG,CAACJ,MAAD,EAASG,KAAT,MAAoB;AAC1CF,EAAAA,IAAI,EAAET,WADoC;AAE1CQ,EAAAA,MAAM,EAACA,MAFmC;AAG1CG,EAAAA,KAAK,EAAEA;AAHmC,CAApB,CAAnB;;AAMP,SAASE,IAAT,GAAe;AACX,MAAGC,YAAY,CAACC,KAAhB,EAAsB;AAClBT,IAAAA,OAAO,CAACQ,YAAY,CAACC,KAAd,CAAP;AACH;AACJ;;AAED,SAASC,SAAT,CAAmBC,IAAnB,EAAwB;AACpB,SAAO;AACHR,IAAAA,IAAI,EAAEL,SADH;AAEHc,IAAAA,MAAM,EAAED;AAFL,GAAP;AAIH;;AAGD,OAAO,SAASE,QAAT,GAAmB;AACtBC,EAAAA,OAAO,CAACC,GAAR,CAAY,iCAAZ;;AACA,MAAG;AACC,UAAMC,GAAG,GAAIjB,KAAK,CAACkB,GAAN,CAAU,QAAV,EACb;AAACC,MAAAA,OAAO,EAAE;AACN,wBAAgB;AADV;AAAV,KADa,CAAb;AAIAC,IAAAA,QAAQ,CAACT,SAAS,CAACM,GAAG,CAACL,IAAL,CAAV,CAAR;AACC,GANL,CAOA,OAAMS,GAAN,EAAU;AACFN,IAAAA,OAAO,CAACC,GAAR,CAAYK,GAAZ;AACH;AACJ;AAIL,OAAO,SAASC,KAAT,CAAeC,KAAf,EAAsBC,QAAtB,EAA+B;AAClCT,EAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACA,SAAO,MAAMI,QAAN,IAAiB;AACxB,QAAI;AACA,YAAMH,GAAG,GAAG,MAAMjB,KAAK,CAACyB,IAAN,CAAW,QAAX,EAClB;AAAC,iBAASF,KAAV;AACC,oBAAYC;AADb,OADkB,EAGlB;AAACL,QAAAA,OAAO,EAAE;AAAC,0BAAgB;AAAjB;AAAV,OAHkB,CAAlB;AAMAC,MAAAA,QAAQ,CAAC;AACLhB,QAAAA,IAAI,EAAER,KADD;AAEL8B,QAAAA,OAAO,EAAET,GAAG,CAACL;AAFR,OAAD,CAAR,CAPA,CAWA;;AACAJ,MAAAA,IAAI;AACJM,MAAAA,QAAQ;AACRC,MAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACH,KAfD,CAgBA,OAAOW,KAAP,EAAc;AACVZ,MAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACH;AACJ,GApBG;AAqBH;AAED,OAAO,MAAMY,MAAM,GAAG,OAAO;AACzBxB,EAAAA,IAAI,EAAEP;AADmB,CAAP,CAAf;AAOP,OAAO,MAAMgC,aAAa,GAAG,OAAO;AAChCzB,EAAAA,IAAI,EAAEN;AAD0B,CAAP,CAAtB","sourcesContent":["import { ADD_RECIPE, DELETE_RECIPE, EDIT_RECIPE, LOGIN, LOGOUT, DELETE_ACCOUNT, LOAD_USER} from './actionType';\r\nimport axios from 'axios';\r\nimport setAuth from '../utils/setAuth.js';\r\n\r\nexport const addRecipe = (recipe) => ({\r\n    type: ADD_RECIPE,\r\n    recipe: recipe\r\n})\r\n\r\nexport const deleteRecipe = (index) => ({\r\n    type: DELETE_RECIPE,\r\n    index: index\r\n})\r\n\r\nexport const editRecipe = (recipe, index) => ({\r\n    type: EDIT_RECIPE,\r\n    recipe:recipe,\r\n    index: index\r\n})\r\n\r\nfunction auth(){\r\n    if(localStorage.token){\r\n        setAuth(localStorage.token);\r\n    }\r\n}\r\n\r\nfunction load_user(data){\r\n    return {\r\n        type: LOAD_USER,\r\n        action: data\r\n    }\r\n}\r\n\r\n\r\nexport function userInfo(){\r\n    console.log('we are getting the user info rn');\r\n    try{\r\n        const res =  axios.get('/login', \r\n        {headers: {\r\n            'Content-Type': 'application/json'}\r\n        });\r\n        dispatch(load_user(res.data));\r\n        }\r\n    catch(err){\r\n            console.log(err);\r\n        }\r\n    } \r\n\r\n\r\n\r\nexport function login(email, password){\r\n    console.log('we are starting');\r\n    return async(dispatch)=>{\r\n    try {\r\n        const res = await axios.post('/login', \r\n        {\"email\": email,\r\n         \"password\": password},\r\n        {headers: {'Content-Type': 'application/json'}}   \r\n        );\r\n\r\n        dispatch({\r\n            type: LOGIN,\r\n            payload: res.data\r\n        });\r\n        //adds authorization headers\r\n        auth();\r\n        userInfo();\r\n        console.log('we finished waiting'); \r\n    } \r\n    catch (error) {\r\n        console.log('error caught in action.js');\r\n    }\r\n}\r\n}\r\n\r\nexport const logout = () => ({\r\n    type: LOGOUT\r\n})\r\n\r\n\r\n\r\n\r\nexport const deleteAccount = () => ({\r\n    type: DELETE_ACCOUNT\r\n})"]},"metadata":{},"sourceType":"module"}