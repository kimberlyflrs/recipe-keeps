{"ast":null,"code":"import { ADD_RECIPE, DELETE_RECIPE, EDIT_RECIPE, LOGIN, LOGOUT, LOAD_USER, SIGNUP, VERIFY, DELETE_ACCOUNT, ERROR, IS_LOADING } from \"../actionType\";\nimport axios from \"axios\";\n\nfunction setAuth(token) {\n  if (token) {\n    console.log('adding token: ' + token);\n    axios.defaults.headers.common = {\n      'Authorization': `bearer ` + token\n    };\n  } else {\n    console.log('deleting token: ' + token);\n    delete axios.defaults.headers.common;\n  }\n}\n\n;\nconst initialState = {\n  logged_in: false,\n  registered: false,\n  added: false,\n  token: \"\",\n  recipes: [],\n  isLoading: false,\n  error: \"\"\n};\n\nconst recipes = (state = initialState, action) => {\n  switch (action.type) {\n    case LOGIN:\n      {\n        if (action.payload.status === 200) {\n          localStorage.setItem(\"token\", action.payload.acessToken);\n          setAuth(localStorage.getItem('token'));\n          return { ...state,\n            registered: true,\n            token: action.payload.acessToken,\n            logged_in: true,\n            isLoading: false\n          };\n        } else {\n          console.log(\"can't login\");\n          return { ...state\n          };\n        }\n      }\n\n    case SIGNUP:\n      {\n        if (action.payload.status === 200) {\n          return { ...state,\n            registered: true\n          };\n        }\n\n        return { ...state\n        };\n      }\n\n    case LOGOUT:\n      {\n        localStorage.removeItem(\"token\");\n        return { ...state,\n          logged_in: false,\n          registered: false,\n          added: false,\n          token: \"\",\n          recipes: [],\n          isLoading: false\n        };\n      }\n\n    case LOAD_USER:\n      {\n        console.log('load user');\n\n        if (action.payload.status === 200) {\n          var token = localStorage.getItem('token');\n          return { ...state,\n            logged_in: true,\n            registered: true,\n            added: false,\n            token: token,\n            recipes: action.payload.message,\n            isLoading: false\n          };\n        }\n\n        localStorage.removeItem('token');\n        return { ...state,\n          logged_in: false,\n          registered: false,\n          added: false,\n          token: \"\",\n          recipes: [],\n          isLoading: false\n        };\n      }\n\n    case VERIFY:\n      {\n        console.log(action.payload);\n        const token = localStorage.getItem(\"token\");\n\n        if (action.payload.status === 200) {\n          return { ...state,\n            logged_in: true,\n            registered: true,\n            added: false,\n            token: token,\n            isLoading: false\n          };\n        }\n\n        localStorage.removeItem('token');\n        return { ...state,\n          logged_in: false,\n          registered: false,\n          added: false,\n          token: \"\",\n          recipes: [],\n          isLoading: false\n        };\n      }\n\n    case ADD_RECIPE:\n      {\n        if (action.payload.status === 200) {\n          return { ...state,\n            added: true,\n            recipes: [...state.recipes, action.payload.recipe],\n            isLoading: false\n          };\n        }\n\n        if (action.payload.status === 401) {\n          localStorage.removeItem('token');\n          return { ...state,\n            logged_in: false,\n            registered: false,\n            added: false,\n            token: \"\",\n            recipes: [],\n            isLoading: false\n          };\n        } else {\n          console.log(\"recipe error\");\n          return { ...state\n          };\n        }\n      }\n\n    case DELETE_RECIPE:\n      {\n        if (action.payload.status === 200) {\n          return { ...state,\n            recipes: state.recipes.slice(action.index - 1, action.index).concat(state.recipes.slice(action.index + 1))\n          };\n        }\n\n        if (action.payload.status === 401) {\n          localStorage.removeItem('token');\n          return { ...state,\n            logged_in: false,\n            registered: false,\n            added: false,\n            token: \"\",\n            recipes: [],\n            isLoading: false\n          };\n        }\n      }\n\n    /* falls through */\n\n    case EDIT_RECIPE:\n      {\n        if (action.payload.status === 200) {\n          return { ...state,\n            recipes: state.recipes.slice(action.index - 1, action.index).concat(action.recipe).concat(state.recipes.slice(action.index + 1)),\n            isLoading: false\n          };\n        }\n\n        if (action.payload.status === 401) {\n          localStorage.removeItem('token');\n          return { ...state,\n            logged_in: false,\n            registered: false,\n            added: false,\n            token: \"\",\n            recipes: [],\n            isLoading: false\n          };\n        }\n      }\n\n    case IS_LOADING:\n      {\n        return { ...state,\n          isLoading: true\n        };\n      }\n\n    case ERROR:\n      {\n        return { ...state,\n          error: action.payload.message\n        };\n      }\n\n    case DELETE_ACCOUNT:\n      {\n        if (action.payload.status === 200) {\n          localStorage.removeItem('token');\n          return { ...state,\n            logged_in: false,\n            registered: false,\n            added: false,\n            token: \"\",\n            recipes: [],\n            isLoading: false\n          };\n        } else {\n          return { ...state\n          };\n        }\n      }\n\n    default:\n      return { ...state\n      };\n  }\n};\n\nexport default recipes;","map":{"version":3,"sources":["C:/Users/Kim/Documents/GitHub/recipe-keeps/client/src/redux/reducers/index.js"],"names":["ADD_RECIPE","DELETE_RECIPE","EDIT_RECIPE","LOGIN","LOGOUT","LOAD_USER","SIGNUP","VERIFY","DELETE_ACCOUNT","ERROR","IS_LOADING","axios","setAuth","token","console","log","defaults","headers","common","initialState","logged_in","registered","added","recipes","isLoading","error","state","action","type","payload","status","localStorage","setItem","acessToken","getItem","removeItem","message","recipe","slice","index","concat"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,aAArB,EAAoCC,WAApC,EAAiDC,KAAjD,EAAwDC,MAAxD,EAAgEC,SAAhE,EAA2EC,MAA3E,EAAmFC,MAAnF,EAA2FC,cAA3F,EAA2GC,KAA3G,EAAkHC,UAAlH,QAAoI,eAApI;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,SAASC,OAAT,CAAiBC,KAAjB,EAAuB;AACrB,MAAIA,KAAJ,EAAW;AACTC,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAiBF,KAA7B;AACAF,IAAAA,KAAK,CAACK,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,GAAgC;AAAC,uBAAkB,SAAD,GAAUL;AAA5B,KAAhC;AACD,GAHD,MAGO;AACLC,IAAAA,OAAO,CAACC,GAAR,CAAY,qBAAmBF,KAA/B;AACA,WAAOF,KAAK,CAACK,QAAN,CAAeC,OAAf,CAAuBC,MAA9B;AACD;AACF;;AAAA;AAED,MAAMC,YAAY,GAAG;AACnBC,EAAAA,SAAS,EAAE,KADQ;AAEnBC,EAAAA,UAAU,EAAE,KAFO;AAGnBC,EAAAA,KAAK,EAAE,KAHY;AAInBT,EAAAA,KAAK,EAAE,EAJY;AAKnBU,EAAAA,OAAO,EAAE,EALU;AAMnBC,EAAAA,SAAS,EAAE,KANQ;AAOnBC,EAAAA,KAAK,EAAE;AAPY,CAArB;;AAWA,MAAMF,OAAO,GAAG,CAACG,KAAK,GAAGP,YAAT,EAAuBQ,MAAvB,KAAiC;AAC/C,UAAQA,MAAM,CAACC,IAAf;AAEE,SAAKzB,KAAL;AAAW;AACT,YAAGwB,MAAM,CAACE,OAAP,CAAeC,MAAf,KAAwB,GAA3B,EAA+B;AAC7BC,UAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BL,MAAM,CAACE,OAAP,CAAeI,UAA7C;AACArB,UAAAA,OAAO,CAACmB,YAAY,CAACG,OAAb,CAAqB,OAArB,CAAD,CAAP;AACA,iBAAO,EAAC,GAAGR,KAAJ;AAAWL,YAAAA,UAAU,EAAC,IAAtB;AAA4BR,YAAAA,KAAK,EAACc,MAAM,CAACE,OAAP,CAAeI,UAAjD;AAA6Db,YAAAA,SAAS,EAAC,IAAvE;AAA6EI,YAAAA,SAAS,EAAC;AAAvF,WAAP;AACD,SAJD,MAKI;AACFV,UAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACA,iBAAO,EAAC,GAAGW;AAAJ,WAAP;AACD;AACF;;AAMD,SAAKpB,MAAL;AAAY;AACV,YAAGqB,MAAM,CAACE,OAAP,CAAeC,MAAf,KAAwB,GAA3B,EAA+B;AAC7B,iBAAO,EAAC,GAAGJ,KAAJ;AAAWL,YAAAA,UAAU,EAAC;AAAtB,WAAP;AACD;;AACD,eAAO,EAAC,GAAGK;AAAJ,SAAP;AACD;;AAMD,SAAKtB,MAAL;AAAY;AACR2B,QAAAA,YAAY,CAACI,UAAb,CAAwB,OAAxB;AACA,eAAO,EAAC,GAAGT,KAAJ;AAAWN,UAAAA,SAAS,EAAC,KAArB;AAA4BC,UAAAA,UAAU,EAAE,KAAxC;AAA+CC,UAAAA,KAAK,EAAC,KAArD;AAA2DT,UAAAA,KAAK,EAAC,EAAjE;AAAqEU,UAAAA,OAAO,EAAC,EAA7E;AAAiFC,UAAAA,SAAS,EAAC;AAA3F,SAAP;AACH;;AAID,SAAKnB,SAAL;AAAe;AACbS,QAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;;AACA,YAAGY,MAAM,CAACE,OAAP,CAAeC,MAAf,KAAwB,GAA3B,EAA+B;AAC7B,cAAIjB,KAAK,GAAGkB,YAAY,CAACG,OAAb,CAAqB,OAArB,CAAZ;AACA,iBAAO,EAAC,GAAGR,KAAJ;AAAWN,YAAAA,SAAS,EAAC,IAArB;AAA2BC,YAAAA,UAAU,EAAE,IAAvC;AAA6CC,YAAAA,KAAK,EAAC,KAAnD;AAA0DT,YAAAA,KAAK,EAACA,KAAhE;AAAuEU,YAAAA,OAAO,EAACI,MAAM,CAACE,OAAP,CAAeO,OAA9F;AAAuGZ,YAAAA,SAAS,EAAC;AAAjH,WAAP;AACD;;AACDO,QAAAA,YAAY,CAACI,UAAb,CAAwB,OAAxB;AACA,eAAO,EAAC,GAAGT,KAAJ;AAAWN,UAAAA,SAAS,EAAC,KAArB;AAA4BC,UAAAA,UAAU,EAAE,KAAxC;AAA+CC,UAAAA,KAAK,EAAC,KAArD;AAA2DT,UAAAA,KAAK,EAAC,EAAjE;AAAqEU,UAAAA,OAAO,EAAC,EAA7E;AAAiFC,UAAAA,SAAS,EAAC;AAA3F,SAAP;AACD;;AAED,SAAKjB,MAAL;AAAY;AACVO,QAAAA,OAAO,CAACC,GAAR,CAAYY,MAAM,CAACE,OAAnB;AACA,cAAMhB,KAAK,GAAGkB,YAAY,CAACG,OAAb,CAAqB,OAArB,CAAd;;AAEA,YAAGP,MAAM,CAACE,OAAP,CAAeC,MAAf,KAAwB,GAA3B,EAA+B;AAC7B,iBAAM,EAAC,GAAGJ,KAAJ;AAAWN,YAAAA,SAAS,EAAC,IAArB;AAA2BC,YAAAA,UAAU,EAAC,IAAtC;AAA4CC,YAAAA,KAAK,EAAC,KAAlD;AAAyDT,YAAAA,KAAK,EAACA,KAA/D;AAAsEW,YAAAA,SAAS,EAAC;AAAhF,WAAN;AACD;;AACDO,QAAAA,YAAY,CAACI,UAAb,CAAwB,OAAxB;AACA,eAAO,EAAC,GAAGT,KAAJ;AAAWN,UAAAA,SAAS,EAAC,KAArB;AAA4BC,UAAAA,UAAU,EAAE,KAAxC;AAA+CC,UAAAA,KAAK,EAAC,KAArD;AAA2DT,UAAAA,KAAK,EAAC,EAAjE;AAAqEU,UAAAA,OAAO,EAAC,EAA7E;AAAiFC,UAAAA,SAAS,EAAC;AAA3F,SAAP;AACD;;AAMD,SAAKxB,UAAL;AAAiB;AACf,YAAG2B,MAAM,CAACE,OAAP,CAAeC,MAAf,KAAwB,GAA3B,EAA+B;AAC7B,iBAAM,EAAC,GAAGJ,KAAJ;AAAWJ,YAAAA,KAAK,EAAC,IAAjB;AAAuBC,YAAAA,OAAO,EAAE,CAAC,GAAGG,KAAK,CAACH,OAAV,EAAmBI,MAAM,CAACE,OAAP,CAAeQ,MAAlC,CAAhC;AAA0Eb,YAAAA,SAAS,EAAC;AAApF,WAAN;AACD;;AACD,YAAGG,MAAM,CAACE,OAAP,CAAeC,MAAf,KAA0B,GAA7B,EAAiC;AAC/BC,UAAAA,YAAY,CAACI,UAAb,CAAwB,OAAxB;AACA,iBAAM,EAAC,GAAGT,KAAJ;AAAWN,YAAAA,SAAS,EAAE,KAAtB;AAA6BC,YAAAA,UAAU,EAAE,KAAzC;AAAgDC,YAAAA,KAAK,EAAE,KAAvD;AAA8DT,YAAAA,KAAK,EAAC,EAApE;AAAwEU,YAAAA,OAAO,EAAE,EAAjF;AAAqFC,YAAAA,SAAS,EAAC;AAA/F,WAAN;AACD,SAHD,MAII;AACFV,UAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACA,iBAAO,EAAC,GAAGW;AAAJ,WAAP;AACD;AACF;;AAMD,SAAKzB,aAAL;AAAmB;AACjB,YAAG0B,MAAM,CAACE,OAAP,CAAeC,MAAf,KAAwB,GAA3B,EAA+B;AAC7B,iBAAM,EAAC,GAAGJ,KAAJ;AAAUH,YAAAA,OAAO,EAAEG,KAAK,CAACH,OAAN,CAAce,KAAd,CAAoBX,MAAM,CAACY,KAAP,GAAa,CAAjC,EAAoCZ,MAAM,CAACY,KAA3C,EAAkDC,MAAlD,CAAyDd,KAAK,CAACH,OAAN,CAAce,KAAd,CAAoBX,MAAM,CAACY,KAAP,GAAa,CAAjC,CAAzD;AAAnB,WAAN;AACD;;AACD,YAAGZ,MAAM,CAACE,OAAP,CAAeC,MAAf,KAAwB,GAA3B,EAA+B;AAC7BC,UAAAA,YAAY,CAACI,UAAb,CAAwB,OAAxB;AACA,iBAAM,EAAC,GAAGT,KAAJ;AAAWN,YAAAA,SAAS,EAAE,KAAtB;AAA6BC,YAAAA,UAAU,EAAE,KAAzC;AAAgDC,YAAAA,KAAK,EAAE,KAAvD;AAA8DT,YAAAA,KAAK,EAAC,EAApE;AAAuEU,YAAAA,OAAO,EAAE,EAAhF;AAAmFC,YAAAA,SAAS,EAAC;AAA7F,WAAN;AACD;AACF;;AAMD;;AACA,SAAKtB,WAAL;AAAiB;AACf,YAAGyB,MAAM,CAACE,OAAP,CAAeC,MAAf,KAAwB,GAA3B,EAA+B;AAC7B,iBAAM,EAAC,GAAGJ,KAAJ;AAAUH,YAAAA,OAAO,EAAEG,KAAK,CAACH,OAAN,CAAce,KAAd,CAAoBX,MAAM,CAACY,KAAP,GAAa,CAAjC,EAAoCZ,MAAM,CAACY,KAA3C,EAAkDC,MAAlD,CAAyDb,MAAM,CAACU,MAAhE,EAAwEG,MAAxE,CAA+Ed,KAAK,CAACH,OAAN,CAAce,KAAd,CAAoBX,MAAM,CAACY,KAAP,GAAa,CAAjC,CAA/E,CAAnB;AAAwIf,YAAAA,SAAS,EAAC;AAAlJ,WAAN;AACD;;AACD,YAAGG,MAAM,CAACE,OAAP,CAAeC,MAAf,KAAwB,GAA3B,EAA+B;AAC7BC,UAAAA,YAAY,CAACI,UAAb,CAAwB,OAAxB;AACA,iBAAM,EAAC,GAAGT,KAAJ;AAAUN,YAAAA,SAAS,EAAE,KAArB;AAA2BC,YAAAA,UAAU,EAAE,KAAvC;AAA6CC,YAAAA,KAAK,EAAE,KAApD;AAA0DT,YAAAA,KAAK,EAAC,EAAhE;AAAmEU,YAAAA,OAAO,EAAE,EAA5E;AAA+EC,YAAAA,SAAS,EAAC;AAAzF,WAAN;AACD;AACF;;AAKD,SAAKd,UAAL;AAAgB;AACd,eAAO,EAAC,GAAGgB,KAAJ;AAAWF,UAAAA,SAAS,EAAC;AAArB,SAAP;AACD;;AAKD,SAAKf,KAAL;AAAW;AACT,eAAO,EAAC,GAAGiB,KAAJ;AAAWD,UAAAA,KAAK,EAACE,MAAM,CAACE,OAAP,CAAeO;AAAhC,SAAP;AACD;;AAMD,SAAK5B,cAAL;AAAoB;AAClB,YAAGmB,MAAM,CAACE,OAAP,CAAeC,MAAf,KAAwB,GAA3B,EAA+B;AAC7BC,UAAAA,YAAY,CAACI,UAAb,CAAwB,OAAxB;AACA,iBAAM,EAAC,GAAGT,KAAJ;AAAUN,YAAAA,SAAS,EAAE,KAArB;AAA2BC,YAAAA,UAAU,EAAE,KAAvC;AAA6CC,YAAAA,KAAK,EAAE,KAApD;AAA0DT,YAAAA,KAAK,EAAC,EAAhE;AAAmEU,YAAAA,OAAO,EAAE,EAA5E;AAA+EC,YAAAA,SAAS,EAAC;AAAzF,WAAN;AACD,SAHD,MAII;AACF,iBAAM,EAAC,GAAGE;AAAJ,WAAN;AACD;AACF;;AAMD;AACE,aAAO,EAAC,GAAGA;AAAJ,OAAP;AAzIJ;AA2ID,CA5ID;;AA8IA,eAAeH,OAAf","sourcesContent":["import { ADD_RECIPE, DELETE_RECIPE, EDIT_RECIPE, LOGIN, LOGOUT, LOAD_USER, SIGNUP, VERIFY, DELETE_ACCOUNT, ERROR, IS_LOADING } from \"../actionType\";\r\nimport axios from \"axios\";\r\n\r\nfunction setAuth(token){\r\n  if (token) {\r\n    console.log('adding token: '+token);\r\n    axios.defaults.headers.common = {'Authorization': `bearer `+token};\r\n  } else {\r\n    console.log('deleting token: '+token);\r\n    delete axios.defaults.headers.common;\r\n  }\r\n};\r\n\r\nconst initialState = {\r\n  logged_in: false,\r\n  registered: false,\r\n  added: false,\r\n  token: \"\",\r\n  recipes: [],\r\n  isLoading: false,\r\n  error: \"\"\r\n};\r\n\r\n\r\nconst recipes = (state = initialState, action) =>{\r\n  switch (action.type) {\r\n\r\n    case LOGIN:{\r\n      if(action.payload.status===200){\r\n        localStorage.setItem(\"token\", action.payload.acessToken);\r\n        setAuth(localStorage.getItem('token'));\r\n        return {...state, registered:true, token:action.payload.acessToken, logged_in:true, isLoading:false}\r\n      }\r\n      else{\r\n        console.log(\"can't login\");\r\n        return {...state}\r\n      }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    case SIGNUP:{\r\n      if(action.payload.status===200){\r\n        return {...state, registered:true}\r\n      }\r\n      return {...state}\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    case LOGOUT:{\r\n        localStorage.removeItem(\"token\");\r\n        return {...state, logged_in:false, registered: false, added:false,token:\"\", recipes:[], isLoading:false}\r\n    }\r\n\r\n  \r\n\r\n    case LOAD_USER:{\r\n      console.log('load user');\r\n      if(action.payload.status===200){\r\n        var token = localStorage.getItem('token');\r\n        return {...state, logged_in:true, registered: true, added:false, token:token, recipes:action.payload.message, isLoading:false}\r\n      }\r\n      localStorage.removeItem('token')\r\n      return {...state, logged_in:false, registered: false, added:false,token:\"\", recipes:[], isLoading:false}\r\n    }\r\n\r\n    case VERIFY:{\r\n      console.log(action.payload);\r\n      const token = localStorage.getItem(\"token\");\r\n\r\n      if(action.payload.status===200){\r\n        return{...state, logged_in:true, registered:true, added:false, token:token, isLoading:false}\r\n      }\r\n      localStorage.removeItem('token');\r\n      return {...state, logged_in:false, registered: false, added:false,token:\"\", recipes:[], isLoading:false}\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    case ADD_RECIPE: {\r\n      if(action.payload.status===200){\r\n        return{...state, added:true, recipes: [...state.recipes, action.payload.recipe],isLoading:false}       \r\n      }\r\n      if(action.payload.status === 401){\r\n        localStorage.removeItem('token');\r\n        return{...state, logged_in: false, registered: false, added: false, token:\"\", recipes: [], isLoading:false   }\r\n      }\r\n      else{\r\n        console.log(\"recipe error\");\r\n        return {...state}\r\n      }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    case DELETE_RECIPE:{\r\n      if(action.payload.status===200){\r\n        return{...state,recipes: state.recipes.slice(action.index-1, action.index).concat(state.recipes.slice(action.index+1))}\r\n      }\r\n      if(action.payload.status===401){\r\n        localStorage.removeItem('token');\r\n        return{...state, logged_in: false, registered: false, added: false, token:\"\",recipes: [],isLoading:false}\r\n      }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    /* falls through */\r\n    case EDIT_RECIPE:{\r\n      if(action.payload.status===200){\r\n        return{...state,recipes: state.recipes.slice(action.index-1, action.index).concat(action.recipe).concat(state.recipes.slice(action.index+1)), isLoading:false}\r\n      }\r\n      if(action.payload.status===401){\r\n        localStorage.removeItem('token');\r\n        return{...state,logged_in: false,registered: false,added: false,token:\"\",recipes: [],isLoading:false}       \r\n      }\r\n    }\r\n\r\n\r\n\r\n\r\n    case IS_LOADING:{\r\n      return {...state, isLoading:true}\r\n    }\r\n\r\n\r\n\r\n\r\n    case ERROR:{\r\n      return {...state, error:action.payload.message}\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    case DELETE_ACCOUNT:{\r\n      if(action.payload.status===200){\r\n        localStorage.removeItem('token');\r\n        return{...state,logged_in: false,registered: false,added: false,token:\"\",recipes: [],isLoading:false}       \r\n      }\r\n      else{\r\n        return{...state}\r\n      }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    default:\r\n      return {...state};\r\n  }\r\n}\r\n\r\nexport default recipes;"]},"metadata":{},"sourceType":"module"}