{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kim\\\\Documents\\\\GitHub\\\\recipe-keeps\\\\client\\\\src\\\\App.js\";\nimport React from 'react';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport { BrowserRouter as Router, Route, Switch, Redirect } from \"react-router-dom\";\nimport LandingPage from './pages/LandingPage';\nimport ViewAllRecipe from './pages/ViewAllRecipe';\nimport AddRecipe from './pages/AddRecipe';\nimport EditRecipe from './pages/EditRecipe';\nimport SingleRecipe from './pages/SingleRecipe';\n/*\r\nif no token or expired, show the login page\r\nif token valid, show the view all recipe page\r\n\r\nwhen going to pages make sure they are logged in and token is not expired\r\n*/\n\nasync function validToken() {\n  var token = localStorage.getItem('token');\n\n  if (token) {\n    try {\n      const res = await axios.post('/api/auth/verify', {\n        token: token\n      }, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      console.log(res.data.status);\n\n      if (res.data.status === 200) {\n        return true;\n      } else {\n        localStorage.removeItem('token');\n        return false;\n      }\n    } catch (err) {\n      //server error\n      localStorage.removeItem('token');\n      return false;\n    }\n  } else {\n    localStorage.removeItem('token');\n    return false;\n  }\n}\n\nfunction PrivateRoute({\n  children,\n  ...rest\n}) {\n  validToken();\n  return /*#__PURE__*/React.createElement(Route, Object.assign({}, rest, {\n    render: ({\n      location\n    }) => localStorage.getItem('token') ? children : /*#__PURE__*/React.createElement(Redirect, {\n      to: {\n        pathname: \"/\",\n        state: {\n          from: location\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }));\n}\n\nfunction App() {\n  return /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    component: LandingPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(PrivateRoute, {\n    exact: true,\n    path: \"/addRecipe\",\n    component: AddRecipe,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(PrivateRoute, {\n    exact: true,\n    path: \"/viewRecipes\",\n    component: ViewAllRecipe,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(PrivateRoute, {\n    exact: true,\n    path: \"/recipe/edit/:editRecipe\",\n    component: props => /*#__PURE__*/React.createElement(EditRecipe, Object.assign({}, props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 84\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(PrivateRoute, {\n    exact: true,\n    path: \"/recipe/view/:id\",\n    component: props => /*#__PURE__*/React.createElement(SingleRecipe, Object.assign({}, props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 76\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/Kim/Documents/GitHub/recipe-keeps/client/src/App.js"],"names":["React","BrowserRouter","Router","Route","Switch","Redirect","LandingPage","ViewAllRecipe","AddRecipe","EditRecipe","SingleRecipe","validToken","token","localStorage","getItem","res","axios","post","headers","console","log","data","status","removeItem","err","PrivateRoute","children","rest","location","pathname","state","from","App","props"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './App.css';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport { BrowserRouter as Router, Route, Switch, Redirect } from \"react-router-dom\";\r\nimport LandingPage from './pages/LandingPage';\r\nimport ViewAllRecipe from './pages/ViewAllRecipe';\r\nimport AddRecipe from './pages/AddRecipe';\r\nimport EditRecipe from './pages/EditRecipe';\r\nimport SingleRecipe from './pages/SingleRecipe';\r\n\r\n/*\r\nif no token or expired, show the login page\r\nif token valid, show the view all recipe page\r\n\r\nwhen going to pages make sure they are logged in and token is not expired\r\n*/\r\nasync function validToken(){\r\n  var token = localStorage.getItem('token');\r\n  if(token){\r\n    try{\r\n    const res = await axios.post('/api/auth/verify',\r\n        {token: token},\r\n        {headers: {'Content-Type': 'application/json'}},        \r\n        );\r\n      console.log(res.data.status);\r\n     if(res.data.status===200){\r\n      return true\r\n    }\r\n    else{\r\n      localStorage.removeItem('token');\r\n      return false;\r\n    }   \r\n      }\r\n    catch(err){//server error\r\n      localStorage.removeItem('token');\r\n      return false;\r\n    }\r\n  }\r\n  else{\r\n    localStorage.removeItem('token');\r\n    return false;\r\n  }\r\n}\r\n\r\n\r\nfunction PrivateRoute({ children, ...rest }) {\r\n  validToken();\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) =>\r\n      localStorage.getItem('token') ? (\r\n          children\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: \"/\",\r\n              state: { from: location }\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\n\r\n\r\nfunction App() {\r\n  return (\r\n    <Router>\r\n      <Switch>\r\n        <Route exact path=\"/\" component={LandingPage}></Route>\r\n        <PrivateRoute exact path=\"/addRecipe\" component={AddRecipe}></PrivateRoute>\r\n        <PrivateRoute exact path=\"/viewRecipes\" component={ViewAllRecipe}></PrivateRoute>\r\n        <PrivateRoute exact path=\"/recipe/edit/:editRecipe\"  component={(props) => <EditRecipe {...props}/>}></PrivateRoute>\r\n        <PrivateRoute exact path=\"/recipe/view/:id\"  component={(props) => <SingleRecipe {...props}/>}></PrivateRoute>\r\n      </Switch>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}